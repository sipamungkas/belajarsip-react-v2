import React, { useState } from "react";
import { Link, useRouteMatch } from "react-router-dom";
import { connect } from "react-redux";

import { toggleMessage } from "../../redux/actions/sidebar";
import "./Sidebar.css";

function Sidebar(props) {
  const [show, setShow] = useState(false);
  const isDashboard = useRouteMatch("/dashboard");
  const isActivity = useRouteMatch("/activity");
  const { user } = props.authReducer;
  const { showMessage } = props.sidebarReducer;
  const { onShowMessage } = props;
  return (
    <>
      <nav className="navbar sticky-top bg-primary-blue d-block d-md-none">
        <div className="container-fluid">
          <svg
            id={"humberger-icon"}
            className={"fill-white touchable"}
            height={"32px"}
            version="1.1"
            viewBox="0 0 32 32"
            width="32px"
            xmlns="http://www.w3.org/2000/svg"
            onClick={() => setShow(!show)}
          >
            <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z" />
          </svg>
          <div className="h-100 v-100 ">
            {isDashboard ? (
              <svg
                id="chat-icon"
                className="fill-white mx-1 touchable"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                onClick={() => onShowMessage(!showMessage)}
              >
                <path d="M19 3H5C4.20435 3 3.44129 3.31607 2.87868 3.87868C2.31607 4.44129 2 5.20435 2 6V21C2.00031 21.1772 2.04769 21.3511 2.1373 21.504C2.22691 21.6569 2.35553 21.7832 2.51 21.87C2.65946 21.9547 2.82821 21.9995 3 22C3.17948 21.9999 3.35564 21.9516 3.51 21.86L8 19.14C8.16597 19.0412 8.35699 18.9926 8.55 19H19C19.7956 19 20.5587 18.6839 21.1213 18.1213C21.6839 17.5587 22 16.7956 22 16V6C22 5.20435 21.6839 4.44129 21.1213 3.87868C20.5587 3.31607 19.7956 3 19 3ZM8 12C7.80222 12 7.60888 11.9414 7.44443 11.8315C7.27998 11.7216 7.15181 11.5654 7.07612 11.3827C7.00043 11.2 6.98063 10.9989 7.01921 10.8049C7.0578 10.6109 7.15304 10.4327 7.29289 10.2929C7.43275 10.153 7.61093 10.0578 7.80491 10.0192C7.99889 9.98063 8.19996 10.0004 8.38268 10.0761C8.56541 10.1518 8.72159 10.28 8.83147 10.4444C8.94135 10.6089 9 10.8022 9 11C9 11.2652 8.89464 11.5196 8.70711 11.7071C8.51957 11.8946 8.26522 12 8 12ZM12 12C11.8022 12 11.6089 11.9414 11.4444 11.8315C11.28 11.7216 11.1518 11.5654 11.0761 11.3827C11.0004 11.2 10.9806 10.9989 11.0192 10.8049C11.0578 10.6109 11.153 10.4327 11.2929 10.2929C11.4327 10.153 11.6109 10.0578 11.8049 10.0192C11.9989 9.98063 12.2 10.0004 12.3827 10.0761C12.5654 10.1518 12.7216 10.28 12.8315 10.4444C12.9414 10.6089 13 10.8022 13 11C13 11.2652 12.8946 11.5196 12.7071 11.7071C12.5196 11.8946 12.2652 12 12 12ZM16 12C15.8022 12 15.6089 11.9414 15.4444 11.8315C15.28 11.7216 15.1518 11.5654 15.0761 11.3827C15.0004 11.2 14.9806 10.9989 15.0192 10.8049C15.0578 10.6109 15.153 10.4327 15.2929 10.2929C15.4327 10.153 15.6109 10.0578 15.8049 10.0192C15.9989 9.98063 16.2 10.0004 16.3827 10.0761C16.5654 10.1518 16.7216 10.28 16.8315 10.4444C16.9414 10.6089 17 10.8022 17 11C17 11.2652 16.8946 11.5196 16.7071 11.7071C16.5196 11.8946 16.2652 12 16 12Z" />
              </svg>
            ) : (
              ""
            )}
            <svg
              id="navbar-notifications"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              className="notification-icon touchable fill-white"
              xmlns="http://www.w3.org/2000/svg"
              onClick={props.onNotificationClick}
            >
              <path d="M10.9841 22.0001C11.3627 21.9913 11.7259 21.849 12.0097 21.5983C12.2934 21.3475 12.4794 21.0045 12.5346 20.6299H9.37354C9.43031 21.0147 9.62493 21.3658 9.92119 21.6178C10.2174 21.8698 10.5952 22.0057 10.9841 22.0001Z" />
              <path d="M19.9085 18.304L19.7042 18.1237C19.1245 17.6073 18.6171 17.015 18.1958 16.3629C17.7356 15.463 17.4598 14.4803 17.3845 13.4723V10.5036C17.382 10.143 17.3499 9.78322 17.2883 9.4279C16.2704 9.21867 15.356 8.6641 14.7 7.85807C14.044 7.05205 13.6867 6.04409 13.6886 5.00486V4.62626C13.0612 4.31748 12.387 4.11443 11.6934 4.0253V3.2681C11.6934 3.05532 11.6089 2.85126 11.4584 2.7008C11.308 2.55035 11.1039 2.46582 10.8912 2.46582C10.6784 2.46582 10.4743 2.55035 10.3239 2.7008C10.1734 2.85126 10.0889 3.05532 10.0889 3.2681V4.05535C8.53583 4.27443 7.11448 5.04798 6.08724 6.23318C5.05999 7.41838 4.49621 8.9352 4.49998 10.5036V13.4723C4.42471 14.4803 4.14889 15.463 3.68869 16.3629C3.27456 17.0134 2.77535 17.6056 2.20433 18.1237L2 18.304V19.9987H19.9085V18.304Z" />
              <path
                d="M18.1957 8.00957C19.8552 8.00957 21.2005 6.66428 21.2005 5.00478C21.2005 3.34529 19.8552 2 18.1957 2C16.5362 2 15.1909 3.34529 15.1909 5.00478C15.1909 6.66428 16.5362 8.00957 18.1957 8.00957Z"
                fill="#FF0000"
              />
            </svg>
          </div>
        </div>
      </nav>
      <div
        className={`overlay-bg-black ${show ? "show-overlay" : ""}`}
        onClick={() => setShow(!show)}
      >
        <aside className={`left-sidebar  ${show ? "show-sidebar" : ""}`}>
          <div className="avatar-container">
            <svg
              id="sidebar-notification"
              width="10%"
              height="10%"
              viewBox="0 0 24 24"
              className="notification-icon touchable fill-white d-none d-md-block"
              xmlns="http://www.w3.org/2000/svg"
              onClick={props.onNotificationClick}
            >
              <path d="M10.9841 22.0001C11.3627 21.9913 11.7259 21.849 12.0097 21.5983C12.2934 21.3475 12.4794 21.0045 12.5346 20.6299H9.37354C9.43031 21.0147 9.62493 21.3658 9.92119 21.6178C10.2174 21.8698 10.5952 22.0057 10.9841 22.0001Z" />
              <path d="M19.9085 18.304L19.7042 18.1237C19.1245 17.6073 18.6171 17.015 18.1958 16.3629C17.7356 15.463 17.4598 14.4803 17.3845 13.4723V10.5036C17.382 10.143 17.3499 9.78322 17.2883 9.4279C16.2704 9.21867 15.356 8.6641 14.7 7.85807C14.044 7.05205 13.6867 6.04409 13.6886 5.00486V4.62626C13.0612 4.31748 12.387 4.11443 11.6934 4.0253V3.2681C11.6934 3.05532 11.6089 2.85126 11.4584 2.7008C11.308 2.55035 11.1039 2.46582 10.8912 2.46582C10.6784 2.46582 10.4743 2.55035 10.3239 2.7008C10.1734 2.85126 10.0889 3.05532 10.0889 3.2681V4.05535C8.53583 4.27443 7.11448 5.04798 6.08724 6.23318C5.05999 7.41838 4.49621 8.9352 4.49998 10.5036V13.4723C4.42471 14.4803 4.14889 15.463 3.68869 16.3629C3.27456 17.0134 2.77535 17.6056 2.20433 18.1237L2 18.304V19.9987H19.9085V18.304Z" />
              <path
                d="M18.1957 8.00957C19.8552 8.00957 21.2005 6.66428 21.2005 5.00478C21.2005 3.34529 19.8552 2 18.1957 2C16.5362 2 15.1909 3.34529 15.1909 5.00478C15.1909 6.66428 16.5362 8.00957 18.1957 8.00957Z"
                fill="#FF0000"
              />
            </svg>
            <img
              src={"/assets/images/ilustration/avatar.svg"}
              className={"avatar-image"}
              alt={"avatar"}
            />
            <Link to={{ pathname: "/profile" }} className="d-flex flex-column">
              <span className="avatar-name text-white">
                {user.name || "Emir Kharisma"}
              </span>
              <span className="avatar-status mt-1 text-white">Online</span>
            </Link>
          </div>
          <div className="menu-container">
            <Link
              to={{ pathname: "/dashboard" }}
              className={`menu-link ${isDashboard ? "active" : ""}`}
            >
              <svg viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 17.5V3.75H14.375V17.5H3.75Z" />
                <path d="M15.625 14.375V3.75H26.25V14.375H15.625Z" />
                <path d="M15.625 26.25V15.625H26.25V26.25H15.625Z" />
                <path d="M3.75 26.25V18.75H14.375V26.25H3.75Z" />
              </svg>
              Dashboard
            </Link>
            <Link
              to={{ pathname: "/activity?limit=5" }}
              className={`menu-link ${isActivity ? "active" : ""}`}
            >
              <svg viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M8.13086 5H22.1934V6.21094H8.13086V5Z" />
                <path d="M22.9744 7.1875H8.02129C7.82192 7.18467 7.62518 7.1415 7.44295 7.06057C7.26072 6.97965 7.09676 6.86265 6.96097 6.71664C6.82518 6.57063 6.72038 6.39863 6.65287 6.21102C6.58536 6.0234 6.55654 5.82405 6.56817 5.625C6.5672 5.22887 6.71672 4.84716 6.98649 4.55709C7.25626 4.26701 7.62613 4.09023 8.02129 4.0625H22.9744C23.1816 4.0625 23.3803 3.98019 23.5268 3.83368C23.6734 3.68716 23.7557 3.48845 23.7557 3.28125C23.7557 3.07405 23.6734 2.87534 23.5268 2.72882C23.3803 2.58231 23.1816 2.5 22.9744 2.5H8.02129C7.21159 2.52836 6.44456 2.87007 5.88196 3.45308C5.31936 4.03609 5.00517 4.81481 5.00567 5.625C4.99811 5.75249 4.99811 5.88032 5.00567 6.00781C4.99814 6.07009 4.99814 6.13304 5.00567 6.19531V24.375C5.00517 25.1852 5.31936 25.9639 5.88196 26.5469C6.44456 27.1299 7.21159 27.4716 8.02129 27.5H22.9744C23.1816 27.5 23.3803 27.4177 23.5268 27.2712C23.6734 27.1247 23.7557 26.926 23.7557 26.7188V8.16406V8.09375V8.02344C23.7561 7.81089 23.6756 7.60615 23.5305 7.45086C23.3853 7.29558 23.1865 7.2014 22.9744 7.1875Z" />
              </svg>
              Activity
            </Link>
            <Link to="/help" className="menu-link">
              <svg viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 2.5C8.0971 2.5 2.5 8.0971 2.5 15C2.5 21.9029 8.0971 27.5 15 27.5C21.9029 27.5 27.5 21.9029 27.5 15C27.5 8.0971 21.9029 2.5 15 2.5ZM15 22.2545C14.3834 22.2545 13.8839 21.755 13.8839 21.1384C13.8839 20.5218 14.3834 20.0223 15 20.0223C15.6166 20.0223 16.1161 20.5218 16.1161 21.1384C16.1161 21.755 15.6166 22.2545 15 22.2545ZM16.755 16.13C16.5023 16.2276 16.2849 16.3991 16.1311 16.622C15.9773 16.845 15.8943 17.1092 15.8929 17.38V18.0134C15.8929 18.1362 15.7924 18.2366 15.6696 18.2366H14.3304C14.2076 18.2366 14.1071 18.1362 14.1071 18.0134V17.4135C14.1071 16.769 14.2941 16.1328 14.6624 15.6027C15.0223 15.0837 15.5246 14.6875 16.1161 14.4615C17.0647 14.096 17.6786 13.3008 17.6786 12.433C17.6786 11.2026 16.476 10.2009 15 10.2009C13.524 10.2009 12.3214 11.2026 12.3214 12.433V12.6451C12.3214 12.7679 12.221 12.8683 12.0982 12.8683H10.7589C10.6362 12.8683 10.5357 12.7679 10.5357 12.6451V12.433C10.5357 11.3365 11.0156 10.3125 11.8862 9.55078C12.7232 8.81696 13.8281 8.41518 15 8.41518C16.1719 8.41518 17.2768 8.81975 18.1138 9.55078C18.9844 10.3125 19.4643 11.3365 19.4643 12.433C19.4643 14.0458 18.4012 15.4967 16.755 16.13Z" />
              </svg>
              Help
            </Link>
            <Link to="/" className="menu-link">
              <img
                src="/assets/images/icons/logout-icon.svg"
                className="menu-icon text-danger"
                alt="Logout Icon"
              />
              <span className="text-danger">Logout</span>
            </Link>
            <div className={"empty-menu-link"}></div>
          </div>
        </aside>
      </div>
    </>
  );
}
const mapStateToProps = (state) => {
  return {
    authReducer: state.authReducer,
    sidebarReducer: state.sidebarReducer,
  };
};

const mapDispatchToProps = (dispatch) => {
  return {
    onShowMessage: (value) => dispatch(toggleMessage(value)),
  };
};

const ConnectedSidebar = connect(mapStateToProps, mapDispatchToProps)(Sidebar);
export default ConnectedSidebar;
